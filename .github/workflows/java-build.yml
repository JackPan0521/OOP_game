name: Game CI/CD

on:
  push:
    branches: [ main, develop ]
  pull_request:
    branches: [ main ]

jobs:
  build-and-verify:
    runs-on: ubuntu-latest
    
    steps:
    - name: Checkout code
      uses: actions/checkout@v3
    
    - name: Setup Java 11
      uses: actions/setup-java@v3
      with:
        java-version: '11'
        distribution: 'temurin'
    
    - name: Create bin directory
      run: mkdir -p bin
    
    - name: Compile game code
      run: javac -d bin src/characters/*.java src/battle/*.java src/events/*.java src/game/*.java
    
    - name: Verify compiled files
      run: |
        echo "âœ… Compilation successful!"
        echo ""
        echo "ğŸ“¦ Compiled class files:"
        find bin -name "*.class" | sort
        echo ""
        echo "ğŸ“Š Total classes compiled:"
        find bin -name "*.class" | wc -l
    
    - name: Display project structure
      run: |
        echo "ğŸ® Project Structure:"
        echo "===================="
        echo ""
        echo "Source files:"
        find src -name "*.java" | sort
        echo ""
        echo "Configuration files:"
        ls -la | grep -E "\.md|\.yml|\.sh"
    
    - name: Build Summary
      run: |
        echo ""
        echo "ğŸ® Game Build Summary"
        echo "===================="
        echo "âœ… Java compilation: PASSED"
        echo "ğŸ“ Project: OOP Medieval War Game"
        echo "ğŸ¯ Status: Ready to play!"
        echo "ğŸš€ Branch: ${{ github.ref }}"
        echo "ğŸ‘¤ Triggered by: ${{ github.actor }}"
